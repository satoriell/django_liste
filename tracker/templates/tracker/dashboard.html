{% extends 'tracker/base.html' %}
{% load static %}
{% comment %} Konum: /home/admin/App/django_liste/tracker/templates/tracker/dashboard.html {% endcomment %}

{% block title %}Dashboard - Kişisel Liste{% endblock title %}

{% block content %}
    {# Animasyon Güncellendi #}
    <h1 class="mb-4" data-aos="fade-down" data-aos-delay="100">
        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
    </h1>

    {% comment %} ----- Toplam Sayılar ----- {% endcomment %}
    <div class="row mb-4">
        {# GÜNCELLENDİ: data-aos="fade-up" (staggered) #}
        <div class="col-md-3 col-sm-6 mb-3 summary-card summary-card-anime" data-aos="fade-up" data-aos-delay="200">
            <div class="card text-center h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title"><i class="fas fa-tv me-1 text-primary"></i>Toplam Anime</h5>
                    <p class="card-text fs-2 fw-bold my-auto">{{ anime_count }}</p>
                    <a href="{% url 'tracker:anime_list_view' %}" class="btn btn-primary btn-sm mt-auto">Listeye Git</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3 summary-card summary-card-webtoon" data-aos="fade-up" data-aos-delay="300">
            <div class="card text-center h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title"><i class="fas fa-scroll me-1 text-success"></i>Toplam Webtoon</h5>
                    <p class="card-text fs-2 fw-bold my-auto">{{ webtoon_count }}</p>
                    <a href="{% url 'tracker:webtoon_list_view' %}" class="btn btn-success btn-sm mt-auto">Listeye Git</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3 summary-card summary-card-manga" data-aos="fade-up" data-aos-delay="400">
             <div class="card text-center h-100 shadow-sm">
                 <div class="card-body d-flex flex-column">
                    <h5 class="card-title"><i class="fas fa-book-open me-1 text-danger"></i>Toplam Manga</h5>
                    <p class="card-text fs-2 fw-bold my-auto">{{ manga_count }}</p>
                    <a href="{% url 'tracker:manga_list_view' %}" class="btn btn-danger btn-sm mt-auto">Listeye Git</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3 summary-card summary-card-novel" data-aos="fade-up" data-aos-delay="500">
            <div class="card text-center h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title"><i class="fas fa-book me-1" style="color: var(--primary-color);"></i>Toplam Novel</h5>
                    <p class="card-text fs-2 fw-bold my-auto">{{ novel_count }}</p>
                    <a href="{% url 'tracker:novel_list_view' %}" class="btn btn-primary btn-sm mt-auto">Listeye Git</a>
                </div>
            </div>
        </div>
    </div>

    {% comment %} ----- Grafikler Bölümü ----- {% endcomment %}
     <div class="row mb-4">
         {# GÜNCELLENDİ: data-aos="zoom-out" #}
        <div class="col-md-6 mb-4 mb-md-0" data-aos="zoom-out" data-aos-delay="300">
            <h5 class="text-center mb-3 chart-title"><i class="fas fa-chart-pie me-1"></i>Türlere Göre Dağılım</h5>
            <div id="typeDistributionChartContainer" style="position: relative; min-height: 300px;">
                 <canvas id="typeDistributionChart"></canvas>
            </div>
        </div>
         {# GÜNCELLENDİ: data-aos="zoom-out" #}
        <div class="col-md-6" data-aos="zoom-out" data-aos-delay="450">
            <h5 class="text-center mb-3 chart-title"><i class="fas fa-chart-bar me-1"></i>Durumlara Göre Dağılım</h5>
            <div id="statusDistributionChartContainer" style="position: relative; min-height: 300px;">
                 <canvas id="statusDistributionChart"></canvas>
            </div>
        </div>
    </div>

    <hr class="my-4" data-aos="fade">

    {% comment %} ----- Son Eklenenler ve En Yüksek Puanlılar ----- {% endcomment %}
    <div class="row">
         {# GÜNCELLENDİ: data-aos="slide-right" #}
         <div class="col-md-6" data-aos="slide-right" data-aos-duration="700"> {# Daha uzun süre #}
             <h3 class="mb-3"><i class="fas fa-clock text-info me-2"></i>Son Eklenenler</h3>
             {% with items=recent_anime url_name="anime_detail" %}{% include 'tracker/partials/recent_list_card.html' with title="Animeler" %}{% endwith %}
             {% with items=recent_webtoons url_name="webtoon_detail" %}{% include 'tracker/partials/recent_list_card.html' with title="Webtoonlar" %}{% endwith %}
             {% with items=recent_mangas url_name="manga_detail" %}{% include 'tracker/partials/recent_list_card.html' with title="Mangalar" %}{% endwith %}
             {% with items=recent_novels url_name="novel_detail" %}{% include 'tracker/partials/recent_list_card.html' with title="Noveller" %}{% endwith %}
         </div>
          {# GÜNCELLENDİ: data-aos="slide-left" #}
         <div class="col-md-6" data-aos="slide-left" data-aos-duration="700" data-aos-delay="150">
             <h3 class="mb-3"><i class="fas fa-trophy text-warning me-2"></i>En Yüksek Puanlılar</h3>
             {% with items=top_anime url_name="anime_detail" %}{% include 'tracker/partials/top_rated_list_card.html' with title="Animeler" %}{% endwith %}
             {% with items=top_webtoons url_name="webtoon_detail" %}{% include 'tracker/partials/top_rated_list_card.html' with title="Webtoonlar" %}{% endwith %}
             {% with items=top_mangas url_name="manga_detail" %}{% include 'tracker/partials/top_rated_list_card.html' with title="Mangalar" %}{% endwith %}
             {% with items=top_novels url_name="novel_detail" %}{% include 'tracker/partials/top_rated_list_card.html' with title="Noveller" %}{% endwith %}
         </div>
    </div>

    <script id="chartDataJson" type="application/json">
        {{ chart_data_json|safe }}
    </script>

{% endblock content %}


{% block extra_scripts %}
    <script src="{% static 'tracker/js/dashboard_charts.js' %}"></script>
{% endblock extra_scripts %}
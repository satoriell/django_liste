{% comment %}
tracker/templates/tracker/partials/_list_item.html

Bu şablon, farklı medya türleri için tek bir liste öğesini render eder.
AOS animasyonu ve gecikmesi eklendi.

Gerekli Context:
- item, detail_url_name, edit_url_name, delete_url_name, item_type, favorited_pks
- aos_delay (opsiyonel): Animasyon gecikmesi (ms)
{% endcomment %}
{% load static %}

{# GÜNCELLENDİ: data-aos-delay eklendi #}
<li class="list-group-item p-3 border rounded shadow-sm mb-2 d-flex"
    data-aos="fade-up"
    {% if aos_delay %}data-aos-delay="{{ aos_delay }}"{% endif %}>
    <div class="row g-3 w-100 align-items-center">

        {# Resim Alanı #}
        <div class="col-4 col-md-3">
            <a href="{% url 'tracker:'|add:detail_url_name item.pk %}" class="text-decoration-none">
                <div class="ratio ratio-1x1 rounded overflow-hidden bg-light">
                    {% if item.cover_image_url %}
                        <img src="{{ item.cover_image_url }}" alt="{{ item.title }} Kapak"
                             class="img-fluid w-100 h-100"
                             style="object-fit: cover;">
                    {% else %}
                        <div class="d-flex align-items-center justify-content-center h-100">
                            <i class="fas fa-image fa-3x text-secondary" aria-hidden="true"></i>
                         </div>
                    {% endif %}
                </div>
            </a>
        </div>
        {# Resim Alanı Sonu #}

        {# İçerik Alanı #}
        <div class="col-8 col-md-6">
            <h5 class="mb-1"><a href="{% url 'tracker:'|add:detail_url_name item.pk %}" class="text-decoration-none">{{ item.title }}</a></h5>
             <div class="mb-1">
                <span class="badge rounded-pill {% if item.status == 'Watching' %} bg-success {% elif item.status == 'Completed' %} bg-primary {% elif item.status == 'Plan to Watch' %} bg-info text-dark {% elif item.status == 'On Hold' %} bg-warning text-dark {% elif item.status == 'Dropped' %} bg-danger {% else %} bg-secondary {% endif %}">{{ item.get_status_display }}</span>
                {% if item.rating is not None %}
                    <span class="badge bg-dark ms-1"><i class="fas fa-star me-1" aria-hidden="true"></i>{{ item.rating }}/10</span>
                {% endif %}
            </div>
             <small class="text-muted d-block mb-1">
                {% if item.studio %} <i class="fas fa-film me-1" aria-hidden="true"></i> Stüdyo: {{ item.studio }} <br> {% endif %}
                 {% if item.author %} <i class="fas fa-user-edit me-1" aria-hidden="true"></i>
                    {% if item.artist and item.artist != item.author %} Yazar: {{ item.author }} | Çizer: {{ item.artist }}
                    {% else %} Yazar: {{ item.author }} {% endif %} <br>
                 {% elif item.artist %} <i class="fas fa-palette me-1" aria-hidden="true"></i> Çizer: {{ item.artist }} <br> {% endif %}
                 {% if item.platform %} <i class="fas fa-globe me-1" aria-hidden="true"></i> Platform: {{ item.platform }} <br> {% endif %}
                {% if item.episodes_watched is not None %} <i class="fas fa-play me-1" aria-hidden="true"></i> Bölüm: {{ item.episodes_watched }}{% if item.total_episodes is not None %} / {{ item.total_episodes }}{% else %} / ?{% endif %} <br> {% endif %}
                {% if item.chapters_read is not None %} <i class="fas fa-book-reader me-1" aria-hidden="true"></i> Bölüm: {{ item.chapters_read }}{% if item.total_chapters is not None %} / {{ item.total_chapters }}{% else %} / ?{% endif %} <br> {% endif %}
                 {% if item.volumes_read is not None %} <i class="fas fa-layer-group me-1" aria-hidden="true"></i> Cilt: {{ item.volumes_read }}{% if item.total_volumes is not None %} / {{ item.total_volumes }}{% else %} / ?{% endif %} <br> {% endif %}
            </small>
            {% if item.notes %}<p class="mb-1 fst-italic text-muted"><small><i class="fas fa-comment-alt me-1" aria-hidden="true"></i>{{ item.notes|truncatewords_html:15 }}</small></p>{% endif %}
            <small class="text-muted"><i class="fas fa-calendar-plus me-1" aria-hidden="true"></i>Eklendi: {{ item.added_date|date:"d M Y, H:i" }}</small>
        </div>
        {# İçerik Alanı Sonu #}

        {# Eylem Düğmeleri Alanı #}
        <div class="col-12 col-md-3 action-buttons">
             <button type="button"
               class="btn btn-sm {% if item.pk in favorited_pks %}btn-warning{% else %}btn-outline-warning{% endif %} w-100 w-md-auto js-toggle-favorite"
               title="Favoriye Ekle/Çıkar"
               data-item-id="{{ item.pk }}"
               data-item-type="{{ item_type }}">
                <i class="fas fa-star" aria-hidden="true"></i>
            </button>
            <a href="{% url 'tracker:'|add:edit_url_name item.pk %}" class="btn btn-sm btn-outline-primary w-100 w-md-auto"><i class="fas fa-edit me-1" aria-hidden="true"></i>Düzenle</a>
            <a href="{% url 'tracker:'|add:delete_url_name item.pk %}" class="btn btn-sm btn-outline-danger w-100 w-md-auto"><i class="fas fa-trash-alt me-1" aria-hidden="true"></i>Sil</a>
        </div>
        {# Eylem Düğmeleri Alanı Sonu #}
    </div>
</li>